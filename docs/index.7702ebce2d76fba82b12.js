(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a.key),"symbol"===t(i)?i:String(i)),a)}var i}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}const r=n((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t)+t)}}));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}var u=o((function t(e,n){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"draw",(function(){var t=a.support.getRandomInteger(0,a.splashes.length);a.$container.innerText=a.splashes[t]})),c(this,"end",(function(t){t>=a.winScore?a.$container.innerText="Game Over! You won!":a.$container.innerText="Game Over! You lose!"})),this.$container=e,this.winScore=n,this.support=new r,this.splashes=["Eat all","Big snake","Just out of the oven","We are in the matrix!","Open-world alpha sandbox!","Apples or mice?","Hurry up!","What does this food allow itself?","Beware the tail","Hmmmrmm.","Is it poisonous?","Keep it up!","Ha-ha, nice","Home-made!","Contains simulated food","This splash text is now available","Quite Indie!"],this.draw()}));const l=u;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function p(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}const d=p((function t(e,n,r){var a,i,o,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=function(){c.$container.innerHTML="";var t=document.createElement("div");t.classList.add("map"),c.$container.appendChild(t);for(var e=c.height;e>=1;e--)for(var n=1;n<=c.width;n++){var r=document.createElement("div");r.classList.add("cell"),r.setAttribute("x",n),r.setAttribute("y",e),t.appendChild(r)}},(i=h(i="draw"))in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,this.$container=e,this.width=n,this.height=r,this.draw()}));function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function b(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function g(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}function S(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}var x=new WeakMap,P=new WeakMap;const E=b((function t(e,n){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"update",(function(){a.x+=a.dx,a.y+=a.dy,S(a,x).call(a),a.tails.unshift({x:a.x,y:a.y}),a.tails.length>a.maxTails&&a.tails.pop(),a.canRotate=!0})),g(this,"draw",(function(){a.tails.forEach((function(t,e){0===e?document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.add("snakeHead"):document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.add("snakeTail")}))})),w(this,x,{writable:!0,value:function(){a.x>a.map_width?a.x=1:a.x<1&&(a.x=a.map_width),a.y>a.map_height?a.y=1:a.y<1&&(a.y=a.map_height)}}),w(this,P,{writable:!0,value:function(){var t=0,e=0,n=0,r=0;switch(a.support.getRandomInteger(1,5)){case 1:a.dx=0,a.dy=1,a.direction="Up",t=1,e=a.map_width,n=3,r=a.map_height;break;case 2:a.dx=1,a.dy=0,a.direction="Right",t=3,e=a.map_width,n=1,r=a.map_height;break;case 3:a.dx=0,a.dy=-1,a.direction="Down",t=1,e=a.map_width,n=1,r=a.map_height-2;break;default:a.dx=-1,a.dy=0,a.direction="Left",t=1,e=a.map_width-2,n=1,r=a.map_height}a.x=a.support.getRandomInteger(t,e),a.y=a.support.getRandomInteger(n,r),a.tails=[{x:a.x,y:a.y},{x:a.x-a.dx,y:a.y-a.dy},{x:a.x-(a.dx+a.dx),y:a.y-(a.dy+a.dy)}]}}),this.map_width=e,this.map_height=n,this.support=new r,this.x=0,this.y=0,this.dx=0,this.dy=1,this.direction="Up",this.canRotate=!1,this.canGrow=!1,this.isAlive=!0,this.isPaused=!1,this.tails=[],this.maxTails=3,S(this,P).call(this),this.draw()}));function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function T(t,e,n){return(e=D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function W(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(t){var e=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===R(e)?e:String(e)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var H=W((function t(){C(this,t),this.createThing=function(){}})),$=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new Y},t}return W(n)}(H),q=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new z},t}return W(n)}(H),G=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new X},t}return W(n)}(H),N=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new J},t}return W(n)}(H),U=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new Q},t}return W(n)}(H),K=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new F},t}return W(n)}(H),B=W((function t(){var e=this;C(this,t),T(this,"update",(function(){e.rottingStage++})),T(this,"generate",(function(){var t=document.querySelectorAll(".cell"),n=[];t.forEach((function(t){t.classList.contains("snakeTail")||t.classList.contains("snakeHead")||t.classList.contains("thing")||n.push(t)}));var r=e.support.getRandomInteger(1,n.length);e.x=+n[r].getAttribute("x"),e.y=+n[r].getAttribute("y")})),T(this,"draw",(function(){document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.add("thing",e.className)})),this.support=new r,this.x=0,this.y=0,this.rottingStage=0,this.maxRottingStage=0,this.className=""})),Y=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),T(M(t=e.call(this)),"update",(function(){})),t.maxRottingStage=0,t.className="border",t.generate(),t.draw(),t}return W(n)}(B),z=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=50,t.className="apple",t.generate(),t.draw(),t}return W(n)}(B),X=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=25,t.className="mouse",t.generate(),t.draw(),t}return W(n)}(B),J=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=25,t.className="holywater",t.generate(),t.draw(),t}return W(n)}(B),Q=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=100,t.className="crap",t.generate(),t.draw(),t}return W(n)}(B),F=function(t){_(n,t);var e=O(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=100,t.className="bomb",t.generate(),t.draw(),t}return W(n)}(B);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,a=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(a)?a:String(a)),r)}var a}function tt(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function et(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var nt=new WeakSet,rt=new WeakSet;function at(){this._timeStart=Date.now(),this._timeNow=this._timeStart,this._value="00:00"}function it(){this._timeNow=Date.now();var t=this._timeNow-this._timeStart,e=Math.floor(t/1e3),n=0;e>=60&&(e-=60*(n=Math.floor(e/60))),n=n<10?"0".concat(n):"".concat(n),e=e<10?"0".concat(e):"".concat(e),this._value="".concat(n,":").concat(e)}const ot=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,rt),tt(this,nt),et(this,nt,at).call(this)}var e,n;return e=t,(n=[{key:"value",get:function(){return et(this,rt,it).call(this),this._value}},{key:"reset",value:function(){et(this,nt,at).call(this)}}])&&Z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,a=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ct(a)?a:String(a)),r)}var a}const ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._value=e&&"number"==typeof e?e:0}var e,n;return e=t,(n=[{key:"value",get:function(){return this._value},set:function(t){t&&"number"==typeof t&&(this._value=t)}},{key:"increase",value:function(t){this._value+=t&&"number"==typeof t?t:1}},{key:"decrease",value:function(t){this._value-=t&&"number"==typeof t?t:1}},{key:"reset",value:function(){this._value=0}}])&&st(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,a=function(t,e){if("object"!==lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===lt(a)?a:String(a)),r)}var a}function yt(t,e,n){return e&&ft(t.prototype,e),n&&ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ht(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}var dt=new WeakMap,mt=new WeakMap,vt=new WeakMap,bt=new WeakMap,wt=new WeakMap,gt=new WeakMap,kt=new WeakMap,St=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Et=new WeakMap;new(yt((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pt(this,dt,{writable:!0,value:function(){e.map=new d(e.$MAP_WRAPPER,e.MAP_WIDTH,e.MAP_HEIGHT),e.dialog=new l(e.$DIALOG_WRAPPER,e.WIN_SCORE),e.snake=new E(e.MAP_WIDTH,e.MAP_HEIGHT),e.timer=new ot,e.score=new ut,e.factories=[new $,new q,new G,new N,new U,new K],e.things=[],e.borders=[];for(var t=0;t<5;t++)e.borders.push(e.factories[0].createThing());for(var n=0;n<2;n++)e.things.push(e.factories[1].createThing());e.interval=setInterval(ht(e,mt),e.SPEED_RATE)}}),pt(this,mt,{writable:!0,value:function(){ht(e,vt).call(e),ht(e,bt).call(e),ht(e,wt).call(e)}}),pt(this,vt,{writable:!0,value:function(){e.snake.update(),e.things.forEach((function(t){t.update()}))}}),pt(this,bt,{writable:!0,value:function(){e.map.draw(),e.snake.draw(),e.things.forEach((function(t){t.draw()})),e.borders.forEach((function(t){t.draw()})),e.$TIMER.innerText="Time: ".concat(e.timer.value),e.$SCORE.innerText="Score: ".concat(e.score.value)}}),pt(this,wt,{writable:!0,value:function(){if(e.score.value>=3?e.snake.canGrow=!0:e.snake.canGrow=!1,e.things.forEach((function(t,n){t.rottingStage>t.maxRottingStage&&e.things.splice(n,1),e.snake.x===t.x&&e.snake.y===t.y&&(document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.contains("apple")&&(e.snake.canGrow&&e.snake.maxTails++,e.score.increase(1),e.map.draw(),e.snake.draw(),e.borders.forEach((function(t){t.draw()})),e.things.splice(n,1)),document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.contains("mouse")&&(e.snake.canGrow&&e.snake.maxTails++,e.score.increase(5),e.map.draw(),e.snake.draw(),e.borders.forEach((function(t){t.draw()})),e.things.splice(n,1)),document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.contains("holywater")&&(e.snake.maxTails>=5&&(e.snake.maxTails-=2,e.snake.tails.pop(),e.snake.tails.pop()),e.map.draw(),e.snake.draw(),e.borders.forEach((function(t){t.draw()})),e.things.splice(n,1)),document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.contains("crap")&&(e.snake.maxTails>=5&&(e.snake.maxTails-=2,e.snake.tails.pop(),e.snake.tails.pop()),e.score.decrease(10),e.map.draw(),e.snake.draw(),e.borders.forEach((function(t){t.draw()})),e.score.value<0&&(e.snake.isAlive=!1,e.dialog.end(e.score.value),clearInterval(e.interval))),document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.contains("bomb")&&(e.snake.isAlive=!1,e.dialog.end(e.score.value),clearInterval(e.interval)))})),e.things.length<2){var t=e.support.getRandomInteger(1,100),n=0;t<=80?n=1:t>80&&t<=85?n=2:t>85&&t<=90?n=3:t>90&&t<=95?n=4:t>95&&(n=5),e.things.push(e.factories[n].createThing()),e.things.forEach((function(t){t.draw()}))}(document.querySelector(".snakeHead").classList.contains("snakeTail")||document.querySelector(".snakeHead").classList.contains("border")||e.score.value>=e.WIN_SCORE)&&(e.snake.isAlive=!1,e.dialog.end(e.score.value),clearInterval(e.interval))}}),pt(this,gt,{writable:!0,value:function(){window.addEventListener("keydown",(function(t){!0===e.snake.canRotate&&("ArrowLeft"!==t.code&&"KeyA"!==t.code||"Right"===e.snake.direction?"ArrowUp"!==t.code&&"KeyW"!==t.code||"Down"===e.snake.direction?"ArrowRight"!==t.code&&"KeyD"!==t.code||"Left"===e.snake.direction?"ArrowDown"!==t.code&&"KeyS"!==t.code||"Up"===e.snake.direction||(e.snake.dx=0,e.snake.dy=-1,e.snake.direction="Down",e.snake.canRotate=!1):(e.snake.dx=1,e.snake.dy=0,e.snake.direction="Right",e.snake.canRotate=!1):(e.snake.dx=0,e.snake.dy=1,e.snake.direction="Up",e.snake.canRotate=!1):(e.snake.dx=-1,e.snake.dy=0,e.snake.direction="Left",e.snake.canRotate=!1)),"KeyR"===t.code&&(clearInterval(e.interval),ht(e,dt).call(e)),!0===e.snake.isAlive&&"KeyP"===t.code&&(!0===e.snake.isPaused?(e.interval=setInterval(ht(e,mt),e.SPEED_RATE),e.snake.isPaused=!1):(clearInterval(e.interval),e.snake.isPaused=!0))}))}}),pt(this,kt,{writable:!0,value:function(){var t=0;"getGamepads"in window.navigator&&window.addEventListener("gamepadconnected",(function(){setInterval((function(){t+=10;var n,r=navigator.getGamepads(),a=!1;r[0].buttons.forEach((function(t,e){1===t.value&&(n=e,a=!0)})),a&&function(n){!0===e.snake.canRotate&&(12===n&&"Down"!==e.snake.direction?(e.snake.dx=0,e.snake.dy=1,e.snake.direction="Up",e.snake.canRotate=!1):13===n&&"Up"!==e.snake.direction?(e.snake.dx=0,e.snake.dy=-1,e.snake.direction="Down",e.snake.canRotate=!1):14===n&&"Right"!==e.snake.direction?(e.snake.dx=-1,e.snake.dy=0,e.snake.direction="Left",e.snake.canRotate=!1):15===n&&"Left"!==e.snake.direction&&(e.snake.dx=1,e.snake.dy=0,e.snake.direction="Right",e.snake.canRotate=!1)),t>=500&&(!0===e.snake.isAlive&&8===n&&(!0===e.snake.isPaused?(e.interval=setInterval(ht(e,mt),e.SPEED_RATE),e.snake.isPaused=!1,t=0):(clearInterval(e.interval),e.snake.isPaused=!0,t=0)),9===n&&(clearInterval(e.interval),ht(e,dt).call(e),t=0))}(n)}),10)}))}}),pt(this,St,{writable:!0,value:function(){var t=0,n=0,r=0,a=0;e.$MAP_WRAPPER.addEventListener("touchstart",(function(e){t=e.touches[0].pageX,n=e.touches[0].pageY})),e.$MAP_WRAPPER.addEventListener("touchend",(function(i){r=i.changedTouches[0].pageX,a=i.changedTouches[0].pageY;var o=r-t,c=a-n,s=Math.abs(o)>Math.abs(c),u=Math.abs(c)>Math.abs(o);!0===e.snake.canRotate&&(o>0&&s&&"Left"!==e.snake.direction?(e.snake.dx=1,e.snake.dy=0,e.snake.direction="Right",e.snake.canRotate=!1):o<0&&s&&"Right"!==e.snake.direction?(e.snake.dx=-1,e.snake.dy=0,e.snake.direction="Left",e.snake.canRotate=!1):c>0&&u&&"Up"!==e.snake.direction?(e.snake.dx=0,e.snake.dy=-1,e.snake.direction="Down",e.snake.canRotate=!1):c<0&&u&&"Down"!==e.snake.direction&&(e.snake.dx=0,e.snake.dy=1,e.snake.direction="Up",e.snake.canRotate=!1))}))}}),pt(this,xt,{writable:!0,value:function(){e.MAP_WIDTH=15,e.MAP_HEIGHT=15,e.WIN_SCORE=100,e.SPEED_RATE=200}}),pt(this,Pt,{writable:!0,value:function(){e.$MAP_WRAPPER=document.querySelector("#map"),e.$DIALOG_WRAPPER=document.querySelector("#dialog"),e.$TIMER=document.querySelector("#timer"),e.$SCORE=document.querySelector("#score")}}),pt(this,Et,{writable:!0,value:function(){ht(e,gt).call(e),ht(e,kt).call(e),ht(e,St).call(e)}}),ht(this,xt).call(this),ht(this,Pt).call(this),ht(this,Et).call(this),this.support=new r,ht(this,dt).call(this)})))})();