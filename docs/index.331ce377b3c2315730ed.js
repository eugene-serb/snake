(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===t(o)?o:String(o)),i)}var o}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}const r=n((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t)+t)}}));function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var u=a((function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"draw",(function(){var t=i.support.getRandomInteger(0,i.splashes.length);i.$container.innerText=i.splashes[t]})),c(this,"end",(function(t){t>=i.winScore?i.$container.innerText="Game Over! You won!":i.$container.innerText="Game Over! You lose!"})),this.$container=e,this.winScore=n,this.support=new r,this.splashes=["Eat all","Big snake","Just out of the oven","We are in the matrix!","Open-world alpha sandbox!","Apples or mice?","Hurry up!","What does this food allow itself?","Beware the tail","Hmmmrmm.","Is it poisonous?","Keep it up!","Ha-ha, nice","Home-made!","Contains simulated food","This splash text is now available","Quite Indie!"],this.draw()}));const l=u;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function y(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}const d=y((function t(e,n,r){var i,o,a,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=function(){c.$container.innerHTML="";var t=document.createElement("div");t.classList.add("map"),c.$container.appendChild(t);for(var e=c.height;e>=1;e--)for(var n=1;n<=c.width;n++){var r=document.createElement("div");r.classList.add("cell"),r.setAttribute("x",n),r.setAttribute("y",e),t.appendChild(r)}},(o=p(o="draw"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,this.$container=e,this.width=n,this.height=r,this.draw()}));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function b(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function g(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===v(e)?e:String(e)}function S(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}var P=new WeakMap,x=new WeakMap;const R=b((function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"update",(function(){i.x+=i.dx,i.y+=i.dy,S(i,P).call(i),i.tails.unshift({x:i.x,y:i.y}),i.tails.length>i.maxTails&&i.tails.pop(),i.canRotate=!0})),g(this,"draw",(function(){i.tails.forEach((function(t,e){0===e?document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.add("snakeHead"):document.querySelector('[x = "'.concat(t.x,'"][y = "').concat(t.y,'"]')).classList.add("snakeTail")}))})),w(this,P,{writable:!0,value:function(){i.x>i.map_width?i.x=1:i.x<1&&(i.x=i.map_width),i.y>i.map_height?i.y=1:i.y<1&&(i.y=i.map_height)}}),w(this,x,{writable:!0,value:function(){var t=0,e=0,n=0,r=0;switch(i.support.getRandomInteger(1,5)){case 1:i.dx=0,i.dy=1,i.direction="Up",t=1,e=i.map_width,n=3,r=i.map_height;break;case 2:i.dx=1,i.dy=0,i.direction="Right",t=3,e=i.map_width,n=1,r=i.map_height;break;case 3:i.dx=0,i.dy=-1,i.direction="Down",t=1,e=i.map_width,n=1,r=i.map_height-2;break;default:i.dx=-1,i.dy=0,i.direction="Left",t=1,e=i.map_width-2,n=1,r=i.map_height}i.x=i.support.getRandomInteger(t,e),i.y=i.support.getRandomInteger(n,r),i.tails=[{x:i.x,y:i.y},{x:i.x-i.dx,y:i.y-i.dy},{x:i.x-(i.dx+i.dx),y:i.y-(i.dy+i.dy)}]}}),this.map_width=e,this.map_height=n,this.support=new r,this.x=0,this.y=0,this.dx=0,this.dy=1,this.direction="Up",this.canRotate=!1,this.canGrow=!1,this.isAlive=!0,this.isPaused=!1,this.tails=[],this.maxTails=3,S(this,x).call(this),this.draw()}));function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function T(t,e,n){return(e=D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return W(t)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function M(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===E(e)?e:String(e)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var G=M((function t(){C(this,t),this.createThing=function(){}})),H=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new z},t}return M(n)}(G),$=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new Y},t}return M(n)}(G),q=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new X},t}return M(n)}(G),N=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new J},t}return M(n)}(G),U=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new Q},t}return M(n)}(G),K=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).createThing=function(){return new F},t}return M(n)}(G),B=M((function t(){var e=this;C(this,t),T(this,"update",(function(){e.rottingStage++})),T(this,"generate",(function(){var t=document.querySelectorAll(".cell"),n=[];t.forEach((function(t){t.classList.contains("snakeTail")||t.classList.contains("snakeHead")||t.classList.contains("thing")||n.push(t)}));var r=e.support.getRandomInteger(1,n.length);e.x=+n[r].getAttribute("x"),e.y=+n[r].getAttribute("y")})),T(this,"draw",(function(){document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.add("thing",e.className)})),this.support=new r,this.x=0,this.y=0,this.rottingStage=0,this.maxRottingStage=0,this.className=""})),z=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),T(W(t=e.call(this)),"update",(function(){})),t.maxRottingStage=0,t.className="border",t.generate(),t.draw(),t}return M(n)}(B),Y=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=50,t.className="apple",t.generate(),t.draw(),t}return M(n)}(B),X=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=25,t.className="mouse",t.generate(),t.draw(),t}return M(n)}(B),J=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=25,t.className="holywater",t.generate(),t.draw(),t}return M(n)}(B),Q=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=100,t.className="crap",t.generate(),t.draw(),t}return M(n)}(B),F=function(t){O(n,t);var e=j(n);function n(){var t;return C(this,n),(t=e.call(this)).maxRottingStage=100,t.className="bomb",t.generate(),t.draw(),t}return M(n)}(B);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(i)?i:String(i)),r)}var i}function tt(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function et(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var nt=new WeakSet,rt=new WeakSet;function it(){this._timeStart=Date.now(),this._timeNow=this._timeStart,this._value="00:00"}function ot(){this._timeNow=Date.now();var t=this._timeNow-this._timeStart,e=Math.floor(t/1e3),n=0;e>=60&&(e-=60*(n=Math.floor(e/60))),n=n<10?"0".concat(n):"".concat(n),e=e<10?"0".concat(e):"".concat(e),this._value="".concat(n,":").concat(e)}const at=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,rt),tt(this,nt),et(this,nt,it).call(this)}var e,n;return e=t,(n=[{key:"value",get:function(){return et(this,rt,ot).call(this),this._value}},{key:"reset",value:function(){et(this,nt,it).call(this)}}])&&Z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ct(i)?i:String(i)),r)}var i}const ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._value=e&&"number"==typeof e?e:0}var e,n;return e=t,(n=[{key:"value",get:function(){return this._value},set:function(t){t&&"number"==typeof t&&(this._value=t)}},{key:"increase",value:function(t){this._value+=t&&"number"==typeof t?t:1}},{key:"decrease",value:function(t){this._value-=t&&"number"==typeof t?t:1}},{key:"reset",value:function(){this._value=0}}])&&st(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===lt(i)?i:String(i)),r)}var i}function ht(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var yt=new WeakSet;function pt(){this.interval=null,this.isGameOver=!1,this.isPaused=!1,this.canMove=!0}const dt=function(){function t(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,n=yt),n.add(e),ht(this,yt,pt).call(this)}var e,n;return e=t,(n=[{key:"start",value:function(){this.isGameOver&&this.clear(),this.isPaused=!1,this.canMove=!0}},{key:"stop",value:function(){this.isPaused=!0,this.canMove=!1,clearTimeout(this.interval)}},{key:"setGameOver",value:function(){this.isGameOver=!0,this.stop()}},{key:"clear",value:function(){this.stop(),ht(this,yt,pt).call(this)}}])&&ft(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===vt(i)?i:String(i)),r)}var i}function bt(){return bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=wt(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},bt.apply(this,arguments)}function wt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pt(t)););return t}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function kt(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return St(t)}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}function xt(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Rt(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Et=new WeakSet,Tt=new WeakSet,Ot=new WeakSet,_t=new WeakSet,jt=new WeakSet,At=new WeakSet,Wt=new WeakSet,It=new WeakSet,Lt=new WeakSet,Mt=new WeakSet,Dt=new WeakSet;function Ct(){this.support=new r,this.map=new d(this.$MAP_WRAPPER,this.MAP_WIDTH,this.MAP_HEIGHT),this.dialog=new l(this.$DIALOG_WRAPPER,this.WIN_SCORE),this.snake=new R(this.MAP_WIDTH,this.MAP_HEIGHT),this.timer=new at,this.score=new ut,this.factories=[new H,new $,new q,new N,new U,new K],this.things=[],this.borders=[];for(var t=0;t<5;t++)this.borders.push(this.factories[0].createThing());for(var e=0;e<2;e++)this.things.push(this.factories[1].createThing())}function Gt(){Rt(this,Ot,Ht).call(this),Rt(this,_t,$t).call(this),Rt(this,jt,qt).call(this)}function Ht(){this.snake.update(),this.things.forEach((function(t){t.update()}))}function $t(){this.map.draw(),this.snake.draw(),this.things.forEach((function(t){t.draw()})),this.borders.forEach((function(t){t.draw()})),this.$TIMER.innerText="Time: ".concat(this.timer.value),this.$SCORE.innerText="Score: ".concat(this.score.value)}function qt(){var t=this;if(this.score.value>=3?this.snake.canGrow=!0:this.snake.canGrow=!1,this.things.forEach((function(e,n){e.rottingStage>e.maxRottingStage&&t.things.splice(n,1),t.snake.x===e.x&&t.snake.y===e.y&&(document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.contains("apple")&&(t.snake.canGrow&&t.snake.maxTails++,t.score.increase(1),t.map.draw(),t.snake.draw(),t.borders.forEach((function(t){t.draw()})),t.things.splice(n,1)),document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.contains("mouse")&&(t.snake.canGrow&&t.snake.maxTails++,t.score.increase(5),t.map.draw(),t.snake.draw(),t.borders.forEach((function(t){t.draw()})),t.things.splice(n,1)),document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.contains("holywater")&&(t.snake.maxTails>=5&&(t.snake.maxTails-=2,t.snake.tails.pop(),t.snake.tails.pop()),t.map.draw(),t.snake.draw(),t.borders.forEach((function(t){t.draw()})),t.things.splice(n,1)),document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.contains("crap")&&(t.snake.maxTails>=5&&(t.snake.maxTails-=2,t.snake.tails.pop(),t.snake.tails.pop()),t.score.decrease(10),t.map.draw(),t.snake.draw(),t.borders.forEach((function(t){t.draw()})),t.score.value<0&&(t.snake.isAlive=!1,t.dialog.end(t.score.value),clearInterval(t.interval))),document.querySelector('[x = "'.concat(e.x,'"][y = "').concat(e.y,'"]')).classList.contains("bomb")&&(t.snake.isAlive=!1,t.dialog.end(t.score.value),clearInterval(t.interval)))})),this.things.length<2){var e=this.support.getRandomInteger(1,100),n=0;e<=80?n=1:e>80&&e<=85?n=2:e>85&&e<=90?n=3:e>90&&e<=95?n=4:e>95&&(n=5),this.things.push(this.factories[n].createThing()),this.things.forEach((function(t){t.draw()}))}(document.querySelector(".snakeHead").classList.contains("snakeTail")||document.querySelector(".snakeHead").classList.contains("border")||this.score.value>=this.WIN_SCORE)&&(this.snake.isAlive=!1,this.dialog.end(this.score.value),clearInterval(this.interval))}function Nt(){var t=this;window.addEventListener("keydown",(function(e){!0===t.snake.canRotate&&("ArrowLeft"!==e.code&&"KeyA"!==e.code||"Right"===t.snake.direction?"ArrowUp"!==e.code&&"KeyW"!==e.code||"Down"===t.snake.direction?"ArrowRight"!==e.code&&"KeyD"!==e.code||"Left"===t.snake.direction?"ArrowDown"!==e.code&&"KeyS"!==e.code||"Up"===t.snake.direction||(t.snake.dx=0,t.snake.dy=-1,t.snake.direction="Down",t.snake.canRotate=!1):(t.snake.dx=1,t.snake.dy=0,t.snake.direction="Right",t.snake.canRotate=!1):(t.snake.dx=0,t.snake.dy=1,t.snake.direction="Up",t.snake.canRotate=!1):(t.snake.dx=-1,t.snake.dy=0,t.snake.direction="Left",t.snake.canRotate=!1)),"KeyR"===e.code&&(t.clear(),t.start()),!0===t.snake.isAlive&&"KeyP"===e.code&&(!0===t.isPaused?t.start():t.stop())}))}function Ut(){var t=this,e=0;"getGamepads"in window.navigator&&window.addEventListener("gamepadconnected",(function(){setInterval((function(){e+=10;var n,r=navigator.getGamepads(),i=!1;r[0].buttons.forEach((function(t,e){1===t.value&&(n=e,i=!0)})),i&&function(n){!0===t.snake.canRotate&&(12===n&&"Down"!==t.snake.direction?(t.snake.dx=0,t.snake.dy=1,t.snake.direction="Up",t.snake.canRotate=!1):13===n&&"Up"!==t.snake.direction?(t.snake.dx=0,t.snake.dy=-1,t.snake.direction="Down",t.snake.canRotate=!1):14===n&&"Right"!==t.snake.direction?(t.snake.dx=-1,t.snake.dy=0,t.snake.direction="Left",t.snake.canRotate=!1):15===n&&"Left"!==t.snake.direction&&(t.snake.dx=1,t.snake.dy=0,t.snake.direction="Right",t.snake.canRotate=!1)),e>=500&&(!0===t.snake.isAlive&&8===n&&(!0===t.isPaused?(t.interval=setInterval(Rt(t,Tt,Gt),t.SPEED_RATE),t.isPaused=!1,e=0):(clearInterval(t.interval),t.isPaused=!0,e=0)),9===n&&(clearInterval(t.interval),t.start(),e=0))}(n)}),10)}))}function Kt(){var t=this,e=0,n=0,r=0,i=0;this.$MAP_WRAPPER.addEventListener("touchstart",(function(t){e=t.touches[0].pageX,n=t.touches[0].pageY})),this.$MAP_WRAPPER.addEventListener("touchend",(function(o){r=o.changedTouches[0].pageX,i=o.changedTouches[0].pageY;var a=r-e,c=i-n,s=Math.abs(a)>Math.abs(c),u=Math.abs(c)>Math.abs(a);!0===t.snake.canRotate&&(a>0&&s&&"Left"!==t.snake.direction?(t.snake.dx=1,t.snake.dy=0,t.snake.direction="Right",t.snake.canRotate=!1):a<0&&s&&"Right"!==t.snake.direction?(t.snake.dx=-1,t.snake.dy=0,t.snake.direction="Left",t.snake.canRotate=!1):c>0&&u&&"Up"!==t.snake.direction?(t.snake.dx=0,t.snake.dy=-1,t.snake.direction="Down",t.snake.canRotate=!1):c<0&&u&&"Down"!==t.snake.direction&&(t.snake.dx=0,t.snake.dy=1,t.snake.direction="Up",t.snake.canRotate=!1))}))}function Bt(){this.MAP_WIDTH=15,this.MAP_HEIGHT=15,this.WIN_SCORE=100}function zt(){this.$MAP_WRAPPER=document.querySelector("#map"),this.$DIALOG_WRAPPER=document.querySelector("#dialog"),this.$TIMER=document.querySelector("#timer"),this.$SCORE=document.querySelector("#score")}function Yt(){Rt(this,At,Nt).call(this),Rt(this,Wt,Ut).call(this),Rt(this,It,Kt).call(this)}new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pt(r);if(i){var n=Pt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return kt(this,t)});function a(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),xt(St(r=o.call(this)),Dt),xt(St(r),Mt),xt(St(r),Lt),xt(St(r),It),xt(St(r),Wt),xt(St(r),At),xt(St(r),jt),xt(St(r),_t),xt(St(r),Ot),xt(St(r),Tt),xt(St(r),Et),r.SPEED_RATE=null!==(t=r._params)&&void 0!==t&&t.speedRate&&"number"==typeof(null===(e=r._params)||void 0===e?void 0:e.speedRate)?null===(n=r._params)||void 0===n?void 0:n.speedRate:250,Rt(St(r),Mt,zt).call(St(r)),Rt(St(r),Lt,Bt).call(St(r)),Rt(St(r),Dt,Yt).call(St(r)),Rt(St(r),Et,Ct).call(St(r)),r}return e=a,(n=[{key:"start",value:function(){bt(Pt(a.prototype),"start",this).call(this),this.interval=setInterval(Rt(this,Tt,Gt).bind(this),this.SPEED_RATE)}},{key:"clear",value:function(){bt(Pt(a.prototype),"clear",this).call(this),Rt(this,Et,Ct).call(this)}}])&&mt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(dt))({speedRate:200}).start()})();